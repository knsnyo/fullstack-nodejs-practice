<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- lightbox CSS -->
		<link rel="stylesheet" href="/css/lightbox.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <title>Gallery</title>
  </head>
  <body>
		<%- include("../header.ejs") %>
		<%- include("../menu.ejs") %>
		<div style="width:90%; margin: 0 auto">
			<h3 style="font-weight: bold;">Gallery</h3>
			<div class="row row-cols-1 row-cols-md-4">
				<% for (let i = 0; i < result.length; i += 1) { %>
				<div class="col mb-4">
					<div class="card">
						<a href="/image/<%- result[i].file %>" data-lightbox="img">
							<img src="/image/<%- result[i].file %>" class="card-img-top" alt="...">
						</a>
						<div class="card-body">
							<p class="card-text"><%= result[i].title %></p>
							<button type="button" class="btn btn-danger btn-sm delete">Delete</button>
						</div>
					</div>
				</div>
				<% } %>
			</div>
			<div style="margin-bottom: 20px; text-align: right;">
				<a href="/gallery/write" class="btn btn-primary">Write</a>
			</div>
		</div>
		<%- include("../footer.ejs") %>
		<!-- lightbox js-->
		<script src="/js/lightbox-plus-jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
		<script>
			$(".delete").click(_ => {
				$.ajax({
					url: "/gallery/delete",
					method: "DELETE",
					data: {"_id": 1},
					success: (data) => {
	
					},
					error: (err) => {
						
					}
				})
			})
		</script>
  </body>
</html>